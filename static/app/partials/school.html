<div class="navigation">
  <div class="pull-right">{{ user.name }}</div>
  <div class="pull-left">â¨¸ GradeMaker Pro</div>
  <input class="form-control" type="search" ng-model="q" placeholder="Search"/>
</div>


<ul class="items">
  <li ng-click="show.classrooms = true" class="{{ selectedIf(show.classrooms) }}">
    Classrooms
  </li>
  <li>Students</li>
  <li>Assignments</li>
  <li>Faculty</li>
</ul>

<ul ng-show="show.classrooms" class="items">
  <li ng-repeat="_classroom in classrooms | filter:q"
      class="{{ selectedIf(_classroom.id == classroom.id) }}"
      ng-click="displayClassroom(_classroom)">
    {{ _classroom.name }}
  </li>
  <li ng-hide="show.createClassroom" ng-click="show.createClassroom = true">
    + Add Classroom
  </li>
  <form ng-show="show.createClassroom" ng-submit="createClassroom.create()" class="form-inline" role="form">
    <div class="form-group">
      <input ng-model="createClassroom.name" class="form-control">
      <input type="submit" ng-disabled="createClassroom.inProgress" class="btn btn-primary" value="Create">
      <button type="reset" ng-click="show.createClassroom = false" class="btn btn-warning">Cancel</button>
      <span class="error">{{ createClassroom.error }}</span>
    </div>
  </form>
</ul>

<div class="classroom" ng-show="show.classroom">
  <table>
    <tr>
      <td colspan="3">Assignment</td>
      <td ng-repeat="student in classroom.students | filter:q">
        {{ student.name }}
      </td>
      <td class="form-container">
        <span ng-hide="show.addStudent" ng-click="show.addStudent=true" class="add-student">+ Add Student</span>

        <form ng-show="show.addStudent" ng-submit="addStudent.submit()" class="form-inline" role="form">
          <div class="form-group">
            <input ng-model="addStudent.name"
                   typeahead="name for name in collectNames(students()) | filter:$viewValue"
                   class="form-control">
            <input type="submit" ng-disabled="addStudent.inProgress" class="btn btn-primary" value="Create">
            <button type="reset" ng-click="show.addStudent = false; addStudent.error=null;"
                    class="btn btn-warning">Cancel
            </button>
            <span class="error">{{ addStudent.error }}</span>
          </div>
        </form>
      </td>
    </tr>
    <tr ng-repeat="assignment in classroom.assignments | filter:q">
      <td>{{ assignment.name }}</td>
      <td>{{ assignment.due_date }}</td>
      <td>{{ assignment.points }}</td>
      <td ng-repeat="student in classroom.students | filter:q">
        {{ assignment.grades[student.id] }}
      </td>
    </tr>
    <tr ng-hide="show.addAssignment">
      <td ng-click="show.addAssignment=true" colspan="3" class="clickable">+ Add Assignment</td>
    </tr>
    <tr ng-show="show.addAssignment">
      <td>
        <form role="form" ng-submit="addAssignment.submit()" id="addAssignmentForm">
          <input ng-model="addAssignment.name" ng-focus="addAssignment.error=null"
                 type="name" class="form-control" placeholder="name (ie. &quot;Quiz 2&quot;)">
          <input ng-model="addAssignment.due_date" ng-focus="addAssignment.error=null"
                 type="date" class="form-control" placeholder="Due Date">
          <input ng-model="addAssignment.points" ng-focus="addAssignment.error=null"
                 type="number" class="form-control" placeholder="Total points">

          <div class="full-width">
            <button type="submit" ng-click="addAssignment.submit()" class="btn btn-success half-width pull-left">+ Add</button>
            <button type="reset" ng-click="show.addAssignment=false; addAssignment.error = null;"
                    class="btn btn-warning half-width pull-right">Cancel
            </button>
          </div>
          <div class="error">{{addAssignment.error}}</div>
        </form>
      </td>
    </tr>
  </table>
</div>