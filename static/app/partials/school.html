<div class="navigation">
  <div class="pull-right">{{ user.name }}</div>
  <div class="pull-left">â¨¸ GradeMaker Pro</div>
  <input class="form-control" type="search" ng-model="q" placeholder="Search"/>
</div>


<ul class="items">
  <li ng-click="show.classrooms = true" class="{{ selectedIf(show.classrooms) }}">
    Classrooms
  </li>
  <li>Students</li>
  <li>Assignments</li>
  <li>Faculty</li>
</ul>

<ul ng-show="show.classrooms" class="items">
  <li ng-repeat="_classroom in classrooms | filter:q"
      class="{{ selectedIf(_classroom.id == classroom.id) }}"
      ng-click="displayClassroom(_classroom)">
    {{ _classroom.name }}
  </li>
  <li ng-hide="show.createClassroom" ng-click="show.createClassroom = true">
    + Add Classroom
  </li>
  <form ng-show="show.createClassroom" ng-submit="createClassroom.create()" class="form-inline" role="form">
    <div class="form-group">
      <input ng-model="createClassroom.name" class="form-control">
      <input type="submit" ng-disabled="createClassroom.inProgress" class="btn btn-primary" value="Create">
      <button type="reset" ng-click="show.createClassroom = false" class="btn btn-warning">Cancel</button>
      <span class="error">{{ createClassroom.error }}</span>
    </div>
  </form>
</ul>

<div class="classroom" ng-show="show.classroom">
  <table>
    <tr>
      <td colspan="3">Assignment</td>
      <td ng-repeat="student in classroom.students">
        {{ student.name }}
      </td>
      <td class="nowrap">
        <input type="text" ng-model="addStudent.name" class="form-control"
               typeahead="name for name in collectNames(students()) | filter:$viewValue"
               style="width: 150px; display: inline-block;">
        <input type="submit" ng-disabled="addStudent.inProgress" ng-click="addStudent.submit()" value="+ Add Student"
               class="btn btn-default" style="display: inline-block; width: 120px; margin-top: -2px">
        <span class="error">{{ addStudent.error }}</span>
      </td>
    </tr>
    <tr>
      <td>Title</td>
      <td>Due Date</td>
      <td> Points</td>
      <td ng-repeat="student in classroom.students" class="nowrap">
        {{ totalGrade(classroom, student) }}
      </td>
    </tr>
    <tr ng-repeat="assignment in classroom.assignments | filter:q">
      <td>
        <input type="text" ng-model="assignment.name" ng-change="updateAssignment(assignment)" class="input-cell">
      </td>
      <td>
        <input type="date" ng-model="assignment.due_date" ng-change="updateAssignment(assignment)" class="input-cell">
      </td>
      <td>
        <input type="number" ng-model="assignment.points" ng-change="updateAssignment(assignment)" class="input-cell">
      </td>
      <td ng-repeat="student in classroom.students">
        <input type="text" ng-blur="updateAssignment(assignment)" only-num ng-model=" assignment.grades[student.id] " class="input-cell">
      </td>
    </tr>
    <tr>
      <td>
        <input ng-model="addAssignment.name" ng-focus="addAssignment.error=null"
               type="text" class="form-control" placeholder="name (ie. &quot;Quiz 2&quot;)">
      </td>
      <td>
        <input ng-model="addAssignment.dueDate" ng-focus="addAssignment.error=null"
               type="date" class="form-control" placeholder="Due Date">
      </td>
      <td>
        <input ng-model="addAssignment.points" ng-focus="addAssignment.error=null"
               type="number" class="form-control" placeholder="Total points">
      </td>
    </tr>
    <tr>
      <td colspan="3">
        <button type="submit" ng-click="addAssignment.submit()" class="btn btn-default full-width pull-left">
          + Add Assignment
        </button>
      </td>
    </tr>

  </table>
</div>